# message-processor-service

The `Message processor service` or also referred as `MPS` is responsible for listening on new messages sent by the `MRS`
on RabbitMq and based on the message channel type to sent it to the corresponding receiver

# Design

```mermaid
graph LR
    Sender --> MRS[Message Receiver Service]
    subgraph Communication Service
        MRS --> RabbitMq
        RabbitMq --> MPS[Message Processing Service]
    end
    MPS --> Receiver

```

With supporting tools and services:

```mermaid
graph LR
    Sender --> Gateway[Gateway Service]
    Gateway[Gateway Service] --> KEY[Keycloak]
    Gateway[Gateway Service] --> MRS[Message Receiver Service]
    KEY[Keycloak]
    subgraph SC[Spring Cloud Services]
        Registry[Registry Service]
        Config[Config Service]
    end
    subgraph COMMS[Communication Services]
        MRS --> RabbitMq
        RabbitMq --> MPS[Message Processing Service]
    end
    SC --> COMMS
    MPS --> Receiver

```

# Message Receiver Service

## Dataflow

```mermaid
stateDiagram
    state MPS {
        [*] --> ListenForMessages
        ListenForMessages --> ProcessMessage
        ProcessMessage --> ValidateMessage
        ValidateMessage --> SentWithCorrespondingAdapter
        SentWithCorrespondingAdapter --> [*]
    }
```
# REST API

This message is received through a REST API.
The API documentation is available at http://localhost:8080/swagger-ui/index.html.


# Starting up all services using docker compose

To be able to run the services you need:

1. Docker and Docker Compose installed on your machine.
2. set `keycloak-web` in your `/etc/hosts` file to point to `127.0.0.1` so that you can access Keycloak at `http://keycloak-web:8090`

2. The `message-processor-service` is using Microsoft Graph API to send messages, so you need to have a valid Microsoft Graph API application setup with the necessary permissions to send messages. You can find more information on how to set up the Microsoft Graph API application in the [Microsoft documentation](https://docs.microsoft.com/en-us/graph/auth-v2-user).
 
To run the services, you need to have the following variables set:

in [message-processor-service-email.msgraph.yml](docker/conf/message-processor-service-email.msgraph.yml) set 

```yaml
microsoft:
  azure:
    client-id:
    client-secret:
    tenant-id:
    sender-id:
```

in [message-processor-service-telegram.botapi.yml](docker/conf/message-processor-service-telegram.botapi.yml) set

```yaml
telegram:
  botapi:
    token:
```

Navigate to `docker` directory and run the following command to start the services:

```bash
docker compose up
```

this will start the `message-receiver-service`, `message-processor-service`, `rabbitmq`, `keycloak`, `swagger-ui`,
`registry-service`, `config-service` and `gateway-service` services.

```mermaid
graph LR
    Sender --> Gateway[Gateway Service]
    Gateway[Gateway Service] --> KEY[Keycloak]
    Gateway[Gateway Service] --> MRS[Message Receiver Service]
    KEY[Keycloak]
    subgraph SC[Spring Cloud Services]
        Registry[Registry Service]
        Config[Config Service]
    end
    subgraph COMMS[Communication Services]
        MRS --> RabbitMq
        RabbitMq --> MPS[Message Processing Service]
    end
    SC --> COMMS
    MPS --> Receiver

```

# Examples

**Each request requires Bearer token in the header**

### Acquire token

#### Request
```bash
curl --location 'keycloak-web:8090/realms/openleap-realm/protocol/openid-connect/token' \
--header 'Content-Type: application/x-www-form-urlencoded' \
--data-urlencode 'client_secret=***' \
--data-urlencode 'grant_type=client_credentials' \
--data-urlencode 'scope=mrs_send' \
--data-urlencode 'client_id=message-receiver-service-client'
```
#### Response

```json
{
    "access_token": "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlS25RY3ZTSkxKYTIyOWMydEZZa0RpUjJyLXhLNGoxOUV5RlN6Z3ZuWGlzIn0.eyJleHAiOjE3NTEwMjA1NjEsImlhdCI6MTc1MTAyMDI2MSwianRpIjoiZjdjZGMyYzgtYzFmNi00NjkyLWJmNDUtNDY3ZjQ3ZDUwZjIzIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLXdlYjo4MDkwL3JlYWxtcy9vcGVubGVhcC1yZWFsbSIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiI5YzFhNmRmMy03OTY0LTQyNzAtYjBkZC01YzY4OTFjYmYyNjgiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJtZXNzYWdlLXJlY2VpdmVyLXNlcnZpY2UtY2xpZW50IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1vcGVubGVhcC1yZWFsbSJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoibXJzX3NlbmQgZW1haWwgcmVwb3J0LXNlcnZpY2UgcHJvZmlsZSIsImNsaWVudEhvc3QiOiIxOTIuMTY4LjY1LjEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsInByZWZlcnJlZF91c2VybmFtZSI6InNlcnZpY2UtYWNjb3VudC1tZXNzYWdlLXJlY2VpdmVyLXNlcnZpY2UtY2xpZW50IiwiY2xpZW50QWRkcmVzcyI6IjE5Mi4xNjguNjUuMSIsImNsaWVudF9pZCI6Im1lc3NhZ2UtcmVjZWl2ZXItc2VydmljZS1jbGllbnQifQ.XPPqpJkgOZX0LsaN4pXDtny0HYdGrJvQlCsmTAhVdk1hEr8-dTvbkkp2moUIztcy8njmPb-bXdYm-1Q_6JYHgAPlIc2UQHJmYWk_LZnVMU_ghycVIH-cvsCiBUlD5mFIB39PrRI8U-nBOHp6MEQ763TXCxhOMO5X-Q6dAlZXTNWzR61QyNl8mGYHbbkH_um2A7dQcDStaMeMPoqp2FdIryKrTSvSQYIgtWyNMAw3jmMT3B3Alxs0v0bWIU0grQhkBMSrqUb5ny781qzRaclSWSI9nzcZrLyxDci-E23uAxGQif4CPVvCXhh6FJU1B9JRoFnK6m2vW4l-aEa9bfNLhg",
    "expires_in": 300,
    "refresh_expires_in": 0,
    "token_type": "Bearer",
    "not-before-policy": 0,
    "scope": "mrs_send email report-service profile"
}
```

### Get template by name
#### Request

```bash
curl --location 'localhost:8086/gw/mps/templates/EN_Example_Template' \
--header 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ4NUx0cGFzQzd4Z3A1YXRjbHpxYkVYeXFlMXFOSlpSQnRPczFqX0tHUGpBIn0.eyJleHAiOjE3NTEwMjIwMzEsImlhdCI6MTc1MTAyMTczMSwianRpIjoiOTUxMTMzMjktMWI1Yy00YzhlLWJjYjItNjVjZGI3NDE5NWYxIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLXdlYjo4MDkwL3JlYWxtcy9vcGVubGVhcC1yZWFsbSIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiI5YzFhNmRmMy03OTY0LTQyNzAtYjBkZC01YzY4OTFjYmYyNjgiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJtZXNzYWdlLXJlY2VpdmVyLXNlcnZpY2UtY2xpZW50IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1vcGVubGVhcC1yZWFsbSJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoibXJzX3NlbmQgZW1haWwgcmVwb3J0LXNlcnZpY2UgcHJvZmlsZSIsImNsaWVudEhvc3QiOiIxOTIuMTY4LjY1LjEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsInByZWZlcnJlZF91c2VybmFtZSI6InNlcnZpY2UtYWNjb3VudC1tZXNzYWdlLXJlY2VpdmVyLXNlcnZpY2UtY2xpZW50IiwiY2xpZW50QWRkcmVzcyI6IjE5Mi4xNjguNjUuMSIsImNsaWVudF9pZCI6Im1lc3NhZ2UtcmVjZWl2ZXItc2VydmljZS1jbGllbnQifQ.YKNoUqOFbT5ux3Lbox-sErNZD8CDHCsj2jHaX-SPFhwmOAfPVY_dWNp-4sgDV0Pg0JdgK1pKKLnZQpRlMISuyUk699Lo14EsVFRULw2mDrNxS8vr8yPrnNOwAAam_A1D7tqmzCI6CJBP5w9Zagq5ksjcSrc2bWZ9DxDF8QFRyVyX0k31UNHQPwvLHEDUWL3mxiGLKeCmVlniLynU54KrOtgZ_tH3jnAY3sr0_GTNF4a2v0zvk0nsT4k7OtPWS3MBGBLqZn-qgL_IoMXBZh5Bsh-didD5l1ySR9oc6H1UgGADkDdSmeH_OqJghowvq50E-ndxCG6_tse0sk6v2xyh4g'
```
#### Response
```json
{
    "id": "1",
    "name": "EN_Example_Template",
    "subject": "Welcome to communication services!",
    "body": "<!DOCTYPE html>\n<html>\n<head>\n    <title>Welcome to communication services!</title>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <style type=\"text/css\">\n        /* custom fonts */\n        @font-face {\n            font-family: Akkurat;\n            src: url(''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot'');\n            src: url(''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot?#iefix'') format(''embedded-opentype'');\n            src: url(''https://github.com/opensourcepos/opensourcepos/blob/master/public/fonts/Arial.woff'') format(''woff'');\n            font-weight: normal;\n            font-style: normal;\n        }\n        @font-face {\n            font-family: Noe;\n            src: url(''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot'');\n            src: url(''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot?#iefix'') format(''embedded-opentype'');\n            src: url(''https://github.com/opensourcepos/opensourcepos/blob/master/public/fonts/Arial.woff'') format(''woff'');\n            font-weight: normal;\n            font-style: normal;\n        }\n\n        /* CLIENT-SPECIFIC STYLES */\n        body, table, td, a{-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;} /* Prevent WebKit and Windows mobile changing default text sizes */\n        table, td{mso-table-lspace: 0pt; mso-table-rspace: 0pt;} /* Remove spacing between tables in Outlook 2007 and up */\n        img{-ms-interpolation-mode: bicubic;} /* Allow smoother rendering of resized image in Internet Explorer */\n\n        /* RESET STYLES */\n        img{border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none;}\n        table{border-collapse: collapse !important;}\n        body{height: 100% !important; margin: 0 !important; padding: 0 !important; width: 100% !important;                  font-size:18px;\n            line-height:20px;\n            color:#1d1d1d;\n            font-family:Akkurat, Arial, sans-serif;}\n\n        /* custom styles */\n        h1 {\n            font-size:32px;\n            line-height:35px;\n            color:#1d1d1d;\n            font-family:Noe, Arial, sans-serif;\n        }\n        h2 {\n            font-size:20px;\n            line-height:23px;\n            color:#1d1d1d;\n            font-family:Noe, Arial, sans-serif;\n        }\n        p {\n            font-size:18px;\n            line-height:20px;\n            color:#1d1d1d;\n            font-family:Akkurat, Arial, sans-serif;\n        }\n        a {\n            text-decoration : underline;\n            color : #1d1d1d;\n        }\n\n        /* iOS BLUE LINKS */\n        a[x-apple-data-detectors] {\n            color: inherit !important;\n            text-decoration: none !important;\n            font-size: inherit !important;\n            font-family: inherit !important;\n            font-weight: inherit !important;\n            line-height: inherit !important;\n        }\n\n        /* MOBILE STYLES */\n        @media screen and (max-width: 525px) {\n\n            /* ALLOWS FOR FLUID TABLES */\n            .wrapper {\n                width: 100% !important;\n                max-width: 100% !important;\n            }\n\n            /* ADJUSTS LAYOUT OF LOGO IMAGE */\n            .logo img {\n                margin: 0 auto !important;\n            }\n\n            /* USE THESE CLASSES TO HIDE CONTENT ON MOBILE */\n            .mobile-hide {\n                display: none !important;\n            }\n\n            .img-max {\n                max-width: 100% !important;\n                width: 100% !important;\n                height: auto !important;\n            }\n\n            /* FULL-WIDTH TABLES */\n            .responsive-table {\n                width: 100% !important;\n            }\n\n            /* UTILITY CLASSES FOR ADJUSTING PADDING ON MOBILE */\n            .padding {\n                padding: 10px 5% 15px 5% !important;\n            }\n\n            .padding-meta {\n                padding: 30px 5% 0px 5% !important;\n                text-align: center;\n            }\n\n            .padding-copy {\n                g: 10px 5% 10px 5% !important;\n                text-align: center;\n            }\n\n            .no-padding {\n                padding: 0 !important;\n            }\n\n            .section-padding {\n                padding: 50px 15px 50px 15px !important;\n            }\n\n            /* ADJUST BUTTONS ON MOBILE */\n            .mobile-button-container {\n                margin: 0 auto;\n                width: 100% !important;\n            }\n\n            .mobile-button {\n                padding: 15px !important;\n                border: 0 !important;\n                font-size: 16px !important;\n                display: block !important;\n            }\n\n        }\n\n        /* ANDROID CENTER FIX */\n        div[style*=\"margin: 16px 0;\"] { margin: 0 !important; }\n    </style>\n    <!--[if gte mso 12]>\n    <style type=\"text/css\">\n        .mso-right {\n            padding-left: 20px;\n        }\n    </style>\n    <![endif]-->\n    <!--[if mso]>\n    <style type=\"text/css\">\n        @media (prefers-color-scheme:  light) {\n            html {\n                background: #FFFFFF !important;\n                font-color: #1d1d1d !important;\n            }\n        }\n    </style>\n    <![endif]-->\n</head>\n<body style=\"margin: 0 !important; padding: 0 !important;\">\n\n<!-- HEADER -->\n<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n    <tr>\n        <td bgcolor=\"#616161\" align=\"center\">\n            <!--[if (gte mso 9)|(IE)]>\n            <table align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"700\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" width=\"700\">\n            <![endif]-->\n            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"max-width: 700px;\" class=\"wrapper\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" style=\"padding: 35px 0;\" class=\"logo\">\n                        <img alt=\"Logo\" src=\"https://www.bb-online.de/wp-content/uploads/2022/03/bb-unternehmensberatung-logo-favion.png\" height=\"50\" width=\"299\" style=\"display: block;\" border=\"0\">\n                    </td>\n                </tr>\n            </table>\n            <!--[if (gte mso 9)|(IE)]>\n            </td>\n            </tr>\n            </table>\n            <![endif]-->\n        </td>\n    </tr>\n    <tr>\n        <td bgcolor=\"#ffffff\" align=\"center\" style=\"padding: 70px 15px 70px 15px;\" class=\"section-padding\">\n            <!--[if (gte mso 9)|(IE)]>\n            <table align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"700\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" width=\"700\">\n            <![endif]-->\n            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"max-width: 700px;\" class=\"responsive-table\">\n              <tr>\n                  <td>\n                      <h1 style=\"font-size:32px; line-height:35px; color:#1d1d1d; font-weight: normal; font-family:Noe, Arial, sans-serif;\">Welcome ${params.firstname}, ${params.lastname} to communication services!</h1>\n                      <p class=\"p\" style=\"font-size: 18px; color: #1d1d1d; line-height: 24px; mso-line-height-rule: exactly\">This is a template example</p>\n\n                  </td>\n              </tr>\n              <tr>\n                  <td class=\"cta-btn\" height=\"35\" valign=\"middle\" align=\"left\">\n                      <br><br>\n                      <!--[if mso]>\n                      <v:rect xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:w=\"urn:schemas-microsoft-com:office:word\" href=\"https://idptest.datapart-factoring.de/\" style=\"height:40px;v-text-anchor:middle;width:150px;\" stroke=\"f\" fillcolor=\"#1d1d1d\">\n                          <w:anchorlock/>\n                          <center>\n                      <![endif]-->\n                      <a href=\"https://idptest.datapart-factoring.de/\" style=\"background-color:#1d1d1d;color:#ffffff;display:inline-block;FONT-SIZE: 18px; TEXT-DECORATION: none; TEXT-TRANSFORM: none; DISPLAY: inline-block; LINE-HEIGHT: 35px; background-color: #1d1d1d;text-align:center;width:150px;-webkit-text-size-adjust:none;\">LOG IN</a>\n                      <!--[if mso]>\n                      </center>\n                      </v:rect>\n                      <![endif]-->\n                  </td>\n              </tr>\n              <tr>\n                  <td style=\"FONT-SIZE: 18px; COLOR: #1d1d1d; LINE-HEIGHT: 24px; mso-line-height-rule: exactly\" valign=\"top\" align=\"left\">\n                      <br><br>\n                      <p>If you have any questions, please contact customer service. </p>\n                      <p>Best wishes, <br />Openleap</p>\n                  </td>\n              </tr>\n          </table>\n            <!--[if (gte mso 9)|(IE)]>\n        </td>\n        </tr>\n        </table>\n            <![endif]-->\n        </td>\n    </tr>\n\n    <tr>\n        <td bgcolor=\"#1d1d1d\" align=\"left\" style=\"padding: 20px 20px;\">\n            <!--[if (gte mso 9)|(IE)]>\n            <table align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"700\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" width=\"700\">\n            <![endif]-->\n            <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\" style=\"max-width: 700px;\" class=\"responsive-table\">\n                <tr>\n                  <td style=\"FONT-SIZE: 13px; FONT-FAMILY: Arial, sans-serif; COLOR: #ffffff\" valign=\"middle\" align=\"left\">&nbsp;</td>\n                </tr>\n            </table>\n            <!--[if (gte mso 9)|(IE)]>\n            </td>\n            </tr>\n            </table>\n            <![endif]-->\n        </td>\n    </tr>\n</table>\n</body>\n</html>"
}
```

### Update template

#### Request

```bash
curl --location --request PATCH 'localhost:8086/gw/mps/templates' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ4NUx0cGFzQzd4Z3A1YXRjbHpxYkVYeXFlMXFOSlpSQnRPczFqX0tHUGpBIn0.eyJleHAiOjE3NTEwMjIzMDcsImlhdCI6MTc1MTAyMjAwNywianRpIjoiOWUzMWMzZGItNTExYy00NWQyLWIyZTEtODEzYWZiNTdiNzBlIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLXdlYjo4MDkwL3JlYWxtcy9vcGVubGVhcC1yZWFsbSIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiI5YzFhNmRmMy03OTY0LTQyNzAtYjBkZC01YzY4OTFjYmYyNjgiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJtZXNzYWdlLXJlY2VpdmVyLXNlcnZpY2UtY2xpZW50IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1vcGVubGVhcC1yZWFsbSJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoibXJzX3NlbmQgZW1haWwgcmVwb3J0LXNlcnZpY2UgcHJvZmlsZSIsImNsaWVudEhvc3QiOiIxOTIuMTY4LjY1LjEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsInByZWZlcnJlZF91c2VybmFtZSI6InNlcnZpY2UtYWNjb3VudC1tZXNzYWdlLXJlY2VpdmVyLXNlcnZpY2UtY2xpZW50IiwiY2xpZW50QWRkcmVzcyI6IjE5Mi4xNjguNjUuMSIsImNsaWVudF9pZCI6Im1lc3NhZ2UtcmVjZWl2ZXItc2VydmljZS1jbGllbnQifQ.ASps0TWCCKKglmRc7IJZVK8zbUv83gDbAswKh6dpADYxLFrftb2Ex9Ny1FL5pj18n0ShBIpFxpH1lCvmwNN7yyueLXE9BmB4VdKvAamy9w7Ik_zyeQ0NYGxOHD0yI51aUM3y8xD_eQMb0RyIPw3iRBE3P2XFGrdzAEENL2PekhYeIQYF6TZbmVbQKsJgvteRwf2iIVWijAr3kI5DZOdNTZPUlwp0yHt-zs5903PlD5jnYLbSipi5MAQLkPROo8HmdHQoV2gBUgTvOt-N3HAplJg8N5RBvMBdg3EeGHoHBNUh_rEequk_YqKZjOd3ihwqEHQlOIIbeA_0RC8KqOxPtQ' \
--data-raw '{
    "name": "EN_Example_Template",
    "subject": "This is the subject",
    "body": "<!DOCTYPE html>\n<html>\n<head>\n    <title>Welcome to communication services!</title>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <style type=\"text/css\">\n        /* custom fonts */\n        @font-face {\n            font-family: Akkurat;\n            src: url('\'''\''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot'\'''\'');\n            src: url('\'''\''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot?#iefix'\'''\'') format('\'''\''embedded-opentype'\'''\'');\n            src: url('\'''\''https://github.com/opensourcepos/opensourcepos/blob/master/public/fonts/Arial.woff'\'''\'') format('\'''\''woff'\'''\'');\n            font-weight: normal;\n            font-style: normal;\n        }\n        @font-face {\n            font-family: Noe;\n            src: url('\'''\''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot'\'''\'');\n            src: url('\'''\''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot?#iefix'\'''\'') format('\'''\''embedded-opentype'\'''\'');\n            src: url('\'''\''https://github.com/opensourcepos/opensourcepos/blob/master/public/fonts/Arial.woff'\'''\'') format('\'''\''woff'\'''\'');\n            font-weight: normal;\n            font-style: normal;\n        }\n\n        /* CLIENT-SPECIFIC STYLES */\n        body, table, td, a{-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;} /* Prevent WebKit and Windows mobile changing default text sizes */\n        table, td{mso-table-lspace: 0pt; mso-table-rspace: 0pt;} /* Remove spacing between tables in Outlook 2007 and up */\n        img{-ms-interpolation-mode: bicubic;} /* Allow smoother rendering of resized image in Internet Explorer */\n\n        /* RESET STYLES */\n        img{border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none;}\n        table{border-collapse: collapse !important;}\n        body{height: 100% !important; margin: 0 !important; padding: 0 !important; width: 100% !important;                  font-size:18px;\n            line-height:20px;\n            color:#1d1d1d;\n            font-family:Akkurat, Arial, sans-serif;}\n\n        /* custom styles */\n        h1 {\n            font-size:32px;\n            line-height:35px;\n            color:#1d1d1d;\n            font-family:Noe, Arial, sans-serif;\n        }\n        h2 {\n            font-size:20px;\n            line-height:23px;\n            color:#1d1d1d;\n            font-family:Noe, Arial, sans-serif;\n        }\n        p {\n            font-size:18px;\n            line-height:20px;\n            color:#1d1d1d;\n            font-family:Akkurat, Arial, sans-serif;\n        }\n        a {\n            text-decoration : underline;\n            color : #1d1d1d;\n        }\n\n        /* iOS BLUE LINKS */\n        a[x-apple-data-detectors] {\n            color: inherit !important;\n            text-decoration: none !important;\n            font-size: inherit !important;\n            font-family: inherit !important;\n            font-weight: inherit !important;\n            line-height: inherit !important;\n        }\n\n        /* MOBILE STYLES */\n        @media screen and (max-width: 525px) {\n\n            /* ALLOWS FOR FLUID TABLES */\n            .wrapper {\n                width: 100% !important;\n                max-width: 100% !important;\n            }\n\n            /* ADJUSTS LAYOUT OF LOGO IMAGE */\n            .logo img {\n                margin: 0 auto !important;\n            }\n\n            /* USE THESE CLASSES TO HIDE CONTENT ON MOBILE */\n            .mobile-hide {\n                display: none !important;\n            }\n\n            .img-max {\n                max-width: 100% !important;\n                width: 100% !important;\n                height: auto !important;\n            }\n\n            /* FULL-WIDTH TABLES */\n            .responsive-table {\n                width: 100% !important;\n            }\n\n            /* UTILITY CLASSES FOR ADJUSTING PADDING ON MOBILE */\n            .padding {\n                padding: 10px 5% 15px 5% !important;\n            }\n\n            .padding-meta {\n                padding: 30px 5% 0px 5% !important;\n                text-align: center;\n            }\n\n            .padding-copy {\n                g: 10px 5% 10px 5% !important;\n                text-align: center;\n            }\n\n            .no-padding {\n                padding: 0 !important;\n            }\n\n            .section-padding {\n                padding: 50px 15px 50px 15px !important;\n            }\n\n            /* ADJUST BUTTONS ON MOBILE */\n            .mobile-button-container {\n                margin: 0 auto;\n                width: 100% !important;\n            }\n\n            .mobile-button {\n                padding: 15px !important;\n                border: 0 !important;\n                font-size: 16px !important;\n                display: block !important;\n            }\n\n        }\n\n        /* ANDROID CENTER FIX */\n        div[style*=\"margin: 16px 0;\"] { margin: 0 !important; }\n    </style>\n    <!--[if gte mso 12]>\n    <style type=\"text/css\">\n        .mso-right {\n            padding-left: 20px;\n        }\n    </style>\n    <![endif]-->\n    <!--[if mso]>\n    <style type=\"text/css\">\n        @media (prefers-color-scheme:  light) {\n            html {\n                background: #FFFFFF !important;\n                font-color: #1d1d1d !important;\n            }\n        }\n    </style>\n    <![endif]-->\n</head>\n<body style=\"margin: 0 !important; padding: 0 !important;\">\n\n<!-- HEADER -->\n<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n    <tr>\n        <td bgcolor=\"#616161\" align=\"center\">\n            <!--[if (gte mso 9)|(IE)]>\n            <table align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"700\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" width=\"700\">\n            <![endif]-->\n            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"max-width: 700px;\" class=\"wrapper\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" style=\"padding: 35px 0;\" class=\"logo\">\n                        <img alt=\"Logo\" src=\"https://www.bb-online.de/wp-content/uploads/2022/03/bb-unternehmensberatung-logo-favion.png\" height=\"50\" width=\"299\" style=\"display: block;\" border=\"0\">\n                    </td>\n                </tr>\n            </table>\n            <!--[if (gte mso 9)|(IE)]>\n            </td>\n            </tr>\n            </table>\n            <![endif]-->\n        </td>\n    </tr>\n    <tr>\n        <td bgcolor=\"#ffffff\" align=\"center\" style=\"padding: 70px 15px 70px 15px;\" class=\"section-padding\">\n            <!--[if (gte mso 9)|(IE)]>\n            <table align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"700\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" width=\"700\">\n            <![endif]-->\n            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"max-width: 700px;\" class=\"responsive-table\">\n              <tr>\n                  <td>\n                      <h1 style=\"font-size:32px; line-height:35px; color:#1d1d1d; font-weight: normal; font-family:Noe, Arial, sans-serif;\">Welcome ${params.firstname}, ${params.lastname} to communication services!</h1>\n                      <p class=\"p\" style=\"font-size: 18px; color: #1d1d1d; line-height: 24px; mso-line-height-rule: exactly\">This is a template example</p>\n\n                  </td>\n              </tr>\n              <tr>\n                  <td class=\"cta-btn\" height=\"35\" valign=\"middle\" align=\"left\">\n                      <br><br>\n                      <!--[if mso]>\n                      <v:rect xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:w=\"urn:schemas-microsoft-com:office:word\" href=\"https://idptest.datapart-factoring.de/\" style=\"height:40px;v-text-anchor:middle;width:150px;\" stroke=\"f\" fillcolor=\"#1d1d1d\">\n                          <w:anchorlock/>\n                          <center>\n                      <![endif]-->\n                      <a href=\"https://idptest.datapart-factoring.de/\" style=\"background-color:#1d1d1d;color:#ffffff;display:inline-block;FONT-SIZE: 18px; TEXT-DECORATION: none; TEXT-TRANSFORM: none; DISPLAY: inline-block; LINE-HEIGHT: 35px; background-color: #1d1d1d;text-align:center;width:150px;-webkit-text-size-adjust:none;\">LOG IN</a>\n                      <!--[if mso]>\n                      </center>\n                      </v:rect>\n                      <![endif]-->\n                  </td>\n              </tr>\n              <tr>\n                  <td style=\"FONT-SIZE: 18px; COLOR: #1d1d1d; LINE-HEIGHT: 24px; mso-line-height-rule: exactly\" valign=\"top\" align=\"left\">\n                      <br><br>\n                      <p>If you have any questions, please contact customer service. </p>\n                      <p>Best wishes, <br />Openleap</p>\n                  </td>\n              </tr>\n          </table>\n            <!--[if (gte mso 9)|(IE)]>\n        </td>\n        </tr>\n        </table>\n            <![endif]-->\n        </td>\n    </tr>\n\n    <tr>\n        <td bgcolor=\"#1d1d1d\" align=\"left\" style=\"padding: 20px 20px;\">\n            <!--[if (gte mso 9)|(IE)]>\n            <table align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"700\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" width=\"700\">\n            <![endif]-->\n            <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\" style=\"max-width: 700px;\" class=\"responsive-table\">\n                <tr>\n                  <td style=\"FONT-SIZE: 13px; FONT-FAMILY: Arial, sans-serif; COLOR: #ffffff\" valign=\"middle\" align=\"left\">&nbsp;</td>\n                </tr>\n            </table>\n            <!--[if (gte mso 9)|(IE)]>\n            </td>\n            </tr>\n            </table>\n            <![endif]-->\n        </td>\n    </tr>\n</table>\n</body>\n</html>"
}'
```
#### Response

```json
{
    "id": "1",
    "name": "EN_Example_Template",
    "subject": "This is the subject",
    "body": "<!DOCTYPE html>\n<html>\n<head>\n    <title>Welcome to communication services!</title>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <style type=\"text/css\">\n        /* custom fonts */\n        @font-face {\n            font-family: Akkurat;\n            src: url(''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot'');\n            src: url(''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot?#iefix'') format(''embedded-opentype'');\n            src: url(''https://github.com/opensourcepos/opensourcepos/blob/master/public/fonts/Arial.woff'') format(''woff'');\n            font-weight: normal;\n            font-style: normal;\n        }\n        @font-face {\n            font-family: Noe;\n            src: url(''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot'');\n            src: url(''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot?#iefix'') format(''embedded-opentype'');\n            src: url(''https://github.com/opensourcepos/opensourcepos/blob/master/public/fonts/Arial.woff'') format(''woff'');\n            font-weight: normal;\n            font-style: normal;\n        }\n\n        /* CLIENT-SPECIFIC STYLES */\n        body, table, td, a{-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;} /* Prevent WebKit and Windows mobile changing default text sizes */\n        table, td{mso-table-lspace: 0pt; mso-table-rspace: 0pt;} /* Remove spacing between tables in Outlook 2007 and up */\n        img{-ms-interpolation-mode: bicubic;} /* Allow smoother rendering of resized image in Internet Explorer */\n\n        /* RESET STYLES */\n        img{border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none;}\n        table{border-collapse: collapse !important;}\n        body{height: 100% !important; margin: 0 !important; padding: 0 !important; width: 100% !important;                  font-size:18px;\n            line-height:20px;\n            color:#1d1d1d;\n            font-family:Akkurat, Arial, sans-serif;}\n\n        /* custom styles */\n        h1 {\n            font-size:32px;\n            line-height:35px;\n            color:#1d1d1d;\n            font-family:Noe, Arial, sans-serif;\n        }\n        h2 {\n            font-size:20px;\n            line-height:23px;\n            color:#1d1d1d;\n            font-family:Noe, Arial, sans-serif;\n        }\n        p {\n            font-size:18px;\n            line-height:20px;\n            color:#1d1d1d;\n            font-family:Akkurat, Arial, sans-serif;\n        }\n        a {\n            text-decoration : underline;\n            color : #1d1d1d;\n        }\n\n        /* iOS BLUE LINKS */\n        a[x-apple-data-detectors] {\n            color: inherit !important;\n            text-decoration: none !important;\n            font-size: inherit !important;\n            font-family: inherit !important;\n            font-weight: inherit !important;\n            line-height: inherit !important;\n        }\n\n        /* MOBILE STYLES */\n        @media screen and (max-width: 525px) {\n\n            /* ALLOWS FOR FLUID TABLES */\n            .wrapper {\n                width: 100% !important;\n                max-width: 100% !important;\n            }\n\n            /* ADJUSTS LAYOUT OF LOGO IMAGE */\n            .logo img {\n                margin: 0 auto !important;\n            }\n\n            /* USE THESE CLASSES TO HIDE CONTENT ON MOBILE */\n            .mobile-hide {\n                display: none !important;\n            }\n\n            .img-max {\n                max-width: 100% !important;\n                width: 100% !important;\n                height: auto !important;\n            }\n\n            /* FULL-WIDTH TABLES */\n            .responsive-table {\n                width: 100% !important;\n            }\n\n            /* UTILITY CLASSES FOR ADJUSTING PADDING ON MOBILE */\n            .padding {\n                padding: 10px 5% 15px 5% !important;\n            }\n\n            .padding-meta {\n                padding: 30px 5% 0px 5% !important;\n                text-align: center;\n            }\n\n            .padding-copy {\n                g: 10px 5% 10px 5% !important;\n                text-align: center;\n            }\n\n            .no-padding {\n                padding: 0 !important;\n            }\n\n            .section-padding {\n                padding: 50px 15px 50px 15px !important;\n            }\n\n            /* ADJUST BUTTONS ON MOBILE */\n            .mobile-button-container {\n                margin: 0 auto;\n                width: 100% !important;\n            }\n\n            .mobile-button {\n                padding: 15px !important;\n                border: 0 !important;\n                font-size: 16px !important;\n                display: block !important;\n            }\n\n        }\n\n        /* ANDROID CENTER FIX */\n        div[style*=\"margin: 16px 0;\"] { margin: 0 !important; }\n    </style>\n    <!--[if gte mso 12]>\n    <style type=\"text/css\">\n        .mso-right {\n            padding-left: 20px;\n        }\n    </style>\n    <![endif]-->\n    <!--[if mso]>\n    <style type=\"text/css\">\n        @media (prefers-color-scheme:  light) {\n            html {\n                background: #FFFFFF !important;\n                font-color: #1d1d1d !important;\n            }\n        }\n    </style>\n    <![endif]-->\n</head>\n<body style=\"margin: 0 !important; padding: 0 !important;\">\n\n<!-- HEADER -->\n<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n    <tr>\n        <td bgcolor=\"#616161\" align=\"center\">\n            <!--[if (gte mso 9)|(IE)]>\n            <table align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"700\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" width=\"700\">\n            <![endif]-->\n            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"max-width: 700px;\" class=\"wrapper\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" style=\"padding: 35px 0;\" class=\"logo\">\n                        <img alt=\"Logo\" src=\"https://www.bb-online.de/wp-content/uploads/2022/03/bb-unternehmensberatung-logo-favion.png\" height=\"50\" width=\"299\" style=\"display: block;\" border=\"0\">\n                    </td>\n                </tr>\n            </table>\n            <!--[if (gte mso 9)|(IE)]>\n            </td>\n            </tr>\n            </table>\n            <![endif]-->\n        </td>\n    </tr>\n    <tr>\n        <td bgcolor=\"#ffffff\" align=\"center\" style=\"padding: 70px 15px 70px 15px;\" class=\"section-padding\">\n            <!--[if (gte mso 9)|(IE)]>\n            <table align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"700\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" width=\"700\">\n            <![endif]-->\n            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"max-width: 700px;\" class=\"responsive-table\">\n              <tr>\n                  <td>\n                      <h1 style=\"font-size:32px; line-height:35px; color:#1d1d1d; font-weight: normal; font-family:Noe, Arial, sans-serif;\">Welcome ${params.firstname}, ${params.lastname} to communication services!</h1>\n                      <p class=\"p\" style=\"font-size: 18px; color: #1d1d1d; line-height: 24px; mso-line-height-rule: exactly\">This is a template example</p>\n\n                  </td>\n              </tr>\n              <tr>\n                  <td class=\"cta-btn\" height=\"35\" valign=\"middle\" align=\"left\">\n                      <br><br>\n                      <!--[if mso]>\n                      <v:rect xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:w=\"urn:schemas-microsoft-com:office:word\" href=\"https://idptest.datapart-factoring.de/\" style=\"height:40px;v-text-anchor:middle;width:150px;\" stroke=\"f\" fillcolor=\"#1d1d1d\">\n                          <w:anchorlock/>\n                          <center>\n                      <![endif]-->\n                      <a href=\"https://idptest.datapart-factoring.de/\" style=\"background-color:#1d1d1d;color:#ffffff;display:inline-block;FONT-SIZE: 18px; TEXT-DECORATION: none; TEXT-TRANSFORM: none; DISPLAY: inline-block; LINE-HEIGHT: 35px; background-color: #1d1d1d;text-align:center;width:150px;-webkit-text-size-adjust:none;\">LOG IN</a>\n                      <!--[if mso]>\n                      </center>\n                      </v:rect>\n                      <![endif]-->\n                  </td>\n              </tr>\n              <tr>\n                  <td style=\"FONT-SIZE: 18px; COLOR: #1d1d1d; LINE-HEIGHT: 24px; mso-line-height-rule: exactly\" valign=\"top\" align=\"left\">\n                      <br><br>\n                      <p>If you have any questions, please contact customer service. </p>\n                      <p>Best wishes, <br />Openleap</p>\n                  </td>\n              </tr>\n          </table>\n            <!--[if (gte mso 9)|(IE)]>\n        </td>\n        </tr>\n        </table>\n            <![endif]-->\n        </td>\n    </tr>\n\n    <tr>\n        <td bgcolor=\"#1d1d1d\" align=\"left\" style=\"padding: 20px 20px;\">\n            <!--[if (gte mso 9)|(IE)]>\n            <table align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"700\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" width=\"700\">\n            <![endif]-->\n            <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\" style=\"max-width: 700px;\" class=\"responsive-table\">\n                <tr>\n                  <td style=\"FONT-SIZE: 13px; FONT-FAMILY: Arial, sans-serif; COLOR: #ffffff\" valign=\"middle\" align=\"left\">&nbsp;</td>\n                </tr>\n            </table>\n            <!--[if (gte mso 9)|(IE)]>\n            </td>\n            </tr>\n            </table>\n            <![endif]-->\n        </td>\n    </tr>\n</table>\n</body>\n</html>"
}
```
### Create a template
#### Request

```bash
curl --location 'localhost:8086/gw/mps/templates' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ4NUx0cGFzQzd4Z3A1YXRjbHpxYkVYeXFlMXFOSlpSQnRPczFqX0tHUGpBIn0.eyJleHAiOjE3NTEwMjIzMDcsImlhdCI6MTc1MTAyMjAwNywianRpIjoiOWUzMWMzZGItNTExYy00NWQyLWIyZTEtODEzYWZiNTdiNzBlIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLXdlYjo4MDkwL3JlYWxtcy9vcGVubGVhcC1yZWFsbSIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiI5YzFhNmRmMy03OTY0LTQyNzAtYjBkZC01YzY4OTFjYmYyNjgiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJtZXNzYWdlLXJlY2VpdmVyLXNlcnZpY2UtY2xpZW50IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1vcGVubGVhcC1yZWFsbSJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoibXJzX3NlbmQgZW1haWwgcmVwb3J0LXNlcnZpY2UgcHJvZmlsZSIsImNsaWVudEhvc3QiOiIxOTIuMTY4LjY1LjEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsInByZWZlcnJlZF91c2VybmFtZSI6InNlcnZpY2UtYWNjb3VudC1tZXNzYWdlLXJlY2VpdmVyLXNlcnZpY2UtY2xpZW50IiwiY2xpZW50QWRkcmVzcyI6IjE5Mi4xNjguNjUuMSIsImNsaWVudF9pZCI6Im1lc3NhZ2UtcmVjZWl2ZXItc2VydmljZS1jbGllbnQifQ.ASps0TWCCKKglmRc7IJZVK8zbUv83gDbAswKh6dpADYxLFrftb2Ex9Ny1FL5pj18n0ShBIpFxpH1lCvmwNN7yyueLXE9BmB4VdKvAamy9w7Ik_zyeQ0NYGxOHD0yI51aUM3y8xD_eQMb0RyIPw3iRBE3P2XFGrdzAEENL2PekhYeIQYF6TZbmVbQKsJgvteRwf2iIVWijAr3kI5DZOdNTZPUlwp0yHt-zs5903PlD5jnYLbSipi5MAQLkPROo8HmdHQoV2gBUgTvOt-N3HAplJg8N5RBvMBdg3EeGHoHBNUh_rEequk_YqKZjOd3ihwqEHQlOIIbeA_0RC8KqOxPtQ' \
--data-raw '{
    "name": "EN_Example_Template1",
    "subject": "This is the subject",
    "body": "<!DOCTYPE html>\n<html>\n<head>\n    <title>Welcome to communication services!</title>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <style type=\"text/css\">\n        /* custom fonts */\n        @font-face {\n            font-family: Akkurat;\n            src: url('\'''\''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot'\'''\'');\n            src: url('\'''\''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot?#iefix'\'''\'') format('\'''\''embedded-opentype'\'''\'');\n            src: url('\'''\''https://github.com/opensourcepos/opensourcepos/blob/master/public/fonts/Arial.woff'\'''\'') format('\'''\''woff'\'''\'');\n            font-weight: normal;\n            font-style: normal;\n        }\n        @font-face {\n            font-family: Noe;\n            src: url('\'''\''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot'\'''\'');\n            src: url('\'''\''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot?#iefix'\'''\'') format('\'''\''embedded-opentype'\'''\'');\n            src: url('\'''\''https://github.com/opensourcepos/opensourcepos/blob/master/public/fonts/Arial.woff'\'''\'') format('\'''\''woff'\'''\'');\n            font-weight: normal;\n            font-style: normal;\n        }\n\n        /* CLIENT-SPECIFIC STYLES */\n        body, table, td, a{-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;} /* Prevent WebKit and Windows mobile changing default text sizes */\n        table, td{mso-table-lspace: 0pt; mso-table-rspace: 0pt;} /* Remove spacing between tables in Outlook 2007 and up */\n        img{-ms-interpolation-mode: bicubic;} /* Allow smoother rendering of resized image in Internet Explorer */\n\n        /* RESET STYLES */\n        img{border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none;}\n        table{border-collapse: collapse !important;}\n        body{height: 100% !important; margin: 0 !important; padding: 0 !important; width: 100% !important;                  font-size:18px;\n            line-height:20px;\n            color:#1d1d1d;\n            font-family:Akkurat, Arial, sans-serif;}\n\n        /* custom styles */\n        h1 {\n            font-size:32px;\n            line-height:35px;\n            color:#1d1d1d;\n            font-family:Noe, Arial, sans-serif;\n        }\n        h2 {\n            font-size:20px;\n            line-height:23px;\n            color:#1d1d1d;\n            font-family:Noe, Arial, sans-serif;\n        }\n        p {\n            font-size:18px;\n            line-height:20px;\n            color:#1d1d1d;\n            font-family:Akkurat, Arial, sans-serif;\n        }\n        a {\n            text-decoration : underline;\n            color : #1d1d1d;\n        }\n\n        /* iOS BLUE LINKS */\n        a[x-apple-data-detectors] {\n            color: inherit !important;\n            text-decoration: none !important;\n            font-size: inherit !important;\n            font-family: inherit !important;\n            font-weight: inherit !important;\n            line-height: inherit !important;\n        }\n\n        /* MOBILE STYLES */\n        @media screen and (max-width: 525px) {\n\n            /* ALLOWS FOR FLUID TABLES */\n            .wrapper {\n                width: 100% !important;\n                max-width: 100% !important;\n            }\n\n            /* ADJUSTS LAYOUT OF LOGO IMAGE */\n            .logo img {\n                margin: 0 auto !important;\n            }\n\n            /* USE THESE CLASSES TO HIDE CONTENT ON MOBILE */\n            .mobile-hide {\n                display: none !important;\n            }\n\n            .img-max {\n                max-width: 100% !important;\n                width: 100% !important;\n                height: auto !important;\n            }\n\n            /* FULL-WIDTH TABLES */\n            .responsive-table {\n                width: 100% !important;\n            }\n\n            /* UTILITY CLASSES FOR ADJUSTING PADDING ON MOBILE */\n            .padding {\n                padding: 10px 5% 15px 5% !important;\n            }\n\n            .padding-meta {\n                padding: 30px 5% 0px 5% !important;\n                text-align: center;\n            }\n\n            .padding-copy {\n                g: 10px 5% 10px 5% !important;\n                text-align: center;\n            }\n\n            .no-padding {\n                padding: 0 !important;\n            }\n\n            .section-padding {\n                padding: 50px 15px 50px 15px !important;\n            }\n\n            /* ADJUST BUTTONS ON MOBILE */\n            .mobile-button-container {\n                margin: 0 auto;\n                width: 100% !important;\n            }\n\n            .mobile-button {\n                padding: 15px !important;\n                border: 0 !important;\n                font-size: 16px !important;\n                display: block !important;\n            }\n\n        }\n\n        /* ANDROID CENTER FIX */\n        div[style*=\"margin: 16px 0;\"] { margin: 0 !important; }\n    </style>\n    <!--[if gte mso 12]>\n    <style type=\"text/css\">\n        .mso-right {\n            padding-left: 20px;\n        }\n    </style>\n    <![endif]-->\n    <!--[if mso]>\n    <style type=\"text/css\">\n        @media (prefers-color-scheme:  light) {\n            html {\n                background: #FFFFFF !important;\n                font-color: #1d1d1d !important;\n            }\n        }\n    </style>\n    <![endif]-->\n</head>\n<body style=\"margin: 0 !important; padding: 0 !important;\">\n\n<!-- HEADER -->\n<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n    <tr>\n        <td bgcolor=\"#616161\" align=\"center\">\n            <!--[if (gte mso 9)|(IE)]>\n            <table align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"700\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" width=\"700\">\n            <![endif]-->\n            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"max-width: 700px;\" class=\"wrapper\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" style=\"padding: 35px 0;\" class=\"logo\">\n                        <img alt=\"Logo\" src=\"https://www.bb-online.de/wp-content/uploads/2022/03/bb-unternehmensberatung-logo-favion.png\" height=\"50\" width=\"299\" style=\"display: block;\" border=\"0\">\n                    </td>\n                </tr>\n            </table>\n            <!--[if (gte mso 9)|(IE)]>\n            </td>\n            </tr>\n            </table>\n            <![endif]-->\n        </td>\n    </tr>\n    <tr>\n        <td bgcolor=\"#ffffff\" align=\"center\" style=\"padding: 70px 15px 70px 15px;\" class=\"section-padding\">\n            <!--[if (gte mso 9)|(IE)]>\n            <table align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"700\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" width=\"700\">\n            <![endif]-->\n            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"max-width: 700px;\" class=\"responsive-table\">\n              <tr>\n                  <td>\n                      <h1 style=\"font-size:32px; line-height:35px; color:#1d1d1d; font-weight: normal; font-family:Noe, Arial, sans-serif;\">Welcome ${params.firstname}, ${params.lastname} to communication services!</h1>\n                      <p class=\"p\" style=\"font-size: 18px; color: #1d1d1d; line-height: 24px; mso-line-height-rule: exactly\">This is a template example</p>\n\n                  </td>\n              </tr>\n              <tr>\n                  <td class=\"cta-btn\" height=\"35\" valign=\"middle\" align=\"left\">\n                      <br><br>\n                      <!--[if mso]>\n                      <v:rect xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:w=\"urn:schemas-microsoft-com:office:word\" href=\"https://idptest.datapart-factoring.de/\" style=\"height:40px;v-text-anchor:middle;width:150px;\" stroke=\"f\" fillcolor=\"#1d1d1d\">\n                          <w:anchorlock/>\n                          <center>\n                      <![endif]-->\n                      <a href=\"https://idptest.datapart-factoring.de/\" style=\"background-color:#1d1d1d;color:#ffffff;display:inline-block;FONT-SIZE: 18px; TEXT-DECORATION: none; TEXT-TRANSFORM: none; DISPLAY: inline-block; LINE-HEIGHT: 35px; background-color: #1d1d1d;text-align:center;width:150px;-webkit-text-size-adjust:none;\">LOG IN</a>\n                      <!--[if mso]>\n                      </center>\n                      </v:rect>\n                      <![endif]-->\n                  </td>\n              </tr>\n              <tr>\n                  <td style=\"FONT-SIZE: 18px; COLOR: #1d1d1d; LINE-HEIGHT: 24px; mso-line-height-rule: exactly\" valign=\"top\" align=\"left\">\n                      <br><br>\n                      <p>If you have any questions, please contact customer service. </p>\n                      <p>Best wishes, <br />Openleap</p>\n                  </td>\n              </tr>\n          </table>\n            <!--[if (gte mso 9)|(IE)]>\n        </td>\n        </tr>\n        </table>\n            <![endif]-->\n        </td>\n    </tr>\n\n    <tr>\n        <td bgcolor=\"#1d1d1d\" align=\"left\" style=\"padding: 20px 20px;\">\n            <!--[if (gte mso 9)|(IE)]>\n            <table align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"700\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" width=\"700\">\n            <![endif]-->\n            <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\" style=\"max-width: 700px;\" class=\"responsive-table\">\n                <tr>\n                  <td style=\"FONT-SIZE: 13px; FONT-FAMILY: Arial, sans-serif; COLOR: #ffffff\" valign=\"middle\" align=\"left\">&nbsp;</td>\n                </tr>\n            </table>\n            <!--[if (gte mso 9)|(IE)]>\n            </td>\n            </tr>\n            </table>\n            <![endif]-->\n        </td>\n    </tr>\n</table>\n</body>\n</html>"
}'
```
#### Response
```json
{
    "id": "2",
    "name": "EN_Example_Template1",
    "subject": "This is the subject",
    "body": "<!DOCTYPE html>\n<html>\n<head>\n    <title>Welcome to communication services!</title>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <style type=\"text/css\">\n        /* custom fonts */\n        @font-face {\n            font-family: Akkurat;\n            src: url(''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot'');\n            src: url(''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot?#iefix'') format(''embedded-opentype'');\n            src: url(''https://github.com/opensourcepos/opensourcepos/blob/master/public/fonts/Arial.woff'') format(''woff'');\n            font-weight: normal;\n            font-style: normal;\n        }\n        @font-face {\n            font-family: Noe;\n            src: url(''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot'');\n            src: url(''https://github.com/adamwdraper/styles/blob/master/fonts/icomoon.eot?#iefix'') format(''embedded-opentype'');\n            src: url(''https://github.com/opensourcepos/opensourcepos/blob/master/public/fonts/Arial.woff'') format(''woff'');\n            font-weight: normal;\n            font-style: normal;\n        }\n\n        /* CLIENT-SPECIFIC STYLES */\n        body, table, td, a{-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;} /* Prevent WebKit and Windows mobile changing default text sizes */\n        table, td{mso-table-lspace: 0pt; mso-table-rspace: 0pt;} /* Remove spacing between tables in Outlook 2007 and up */\n        img{-ms-interpolation-mode: bicubic;} /* Allow smoother rendering of resized image in Internet Explorer */\n\n        /* RESET STYLES */\n        img{border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none;}\n        table{border-collapse: collapse !important;}\n        body{height: 100% !important; margin: 0 !important; padding: 0 !important; width: 100% !important;                  font-size:18px;\n            line-height:20px;\n            color:#1d1d1d;\n            font-family:Akkurat, Arial, sans-serif;}\n\n        /* custom styles */\n        h1 {\n            font-size:32px;\n            line-height:35px;\n            color:#1d1d1d;\n            font-family:Noe, Arial, sans-serif;\n        }\n        h2 {\n            font-size:20px;\n            line-height:23px;\n            color:#1d1d1d;\n            font-family:Noe, Arial, sans-serif;\n        }\n        p {\n            font-size:18px;\n            line-height:20px;\n            color:#1d1d1d;\n            font-family:Akkurat, Arial, sans-serif;\n        }\n        a {\n            text-decoration : underline;\n            color : #1d1d1d;\n        }\n\n        /* iOS BLUE LINKS */\n        a[x-apple-data-detectors] {\n            color: inherit !important;\n            text-decoration: none !important;\n            font-size: inherit !important;\n            font-family: inherit !important;\n            font-weight: inherit !important;\n            line-height: inherit !important;\n        }\n\n        /* MOBILE STYLES */\n        @media screen and (max-width: 525px) {\n\n            /* ALLOWS FOR FLUID TABLES */\n            .wrapper {\n                width: 100% !important;\n                max-width: 100% !important;\n            }\n\n            /* ADJUSTS LAYOUT OF LOGO IMAGE */\n            .logo img {\n                margin: 0 auto !important;\n            }\n\n            /* USE THESE CLASSES TO HIDE CONTENT ON MOBILE */\n            .mobile-hide {\n                display: none !important;\n            }\n\n            .img-max {\n                max-width: 100% !important;\n                width: 100% !important;\n                height: auto !important;\n            }\n\n            /* FULL-WIDTH TABLES */\n            .responsive-table {\n                width: 100% !important;\n            }\n\n            /* UTILITY CLASSES FOR ADJUSTING PADDING ON MOBILE */\n            .padding {\n                padding: 10px 5% 15px 5% !important;\n            }\n\n            .padding-meta {\n                padding: 30px 5% 0px 5% !important;\n                text-align: center;\n            }\n\n            .padding-copy {\n                g: 10px 5% 10px 5% !important;\n                text-align: center;\n            }\n\n            .no-padding {\n                padding: 0 !important;\n            }\n\n            .section-padding {\n                padding: 50px 15px 50px 15px !important;\n            }\n\n            /* ADJUST BUTTONS ON MOBILE */\n            .mobile-button-container {\n                margin: 0 auto;\n                width: 100% !important;\n            }\n\n            .mobile-button {\n                padding: 15px !important;\n                border: 0 !important;\n                font-size: 16px !important;\n                display: block !important;\n            }\n\n        }\n\n        /* ANDROID CENTER FIX */\n        div[style*=\"margin: 16px 0;\"] { margin: 0 !important; }\n    </style>\n    <!--[if gte mso 12]>\n    <style type=\"text/css\">\n        .mso-right {\n            padding-left: 20px;\n        }\n    </style>\n    <![endif]-->\n    <!--[if mso]>\n    <style type=\"text/css\">\n        @media (prefers-color-scheme:  light) {\n            html {\n                background: #FFFFFF !important;\n                font-color: #1d1d1d !important;\n            }\n        }\n    </style>\n    <![endif]-->\n</head>\n<body style=\"margin: 0 !important; padding: 0 !important;\">\n\n<!-- HEADER -->\n<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n    <tr>\n        <td bgcolor=\"#616161\" align=\"center\">\n            <!--[if (gte mso 9)|(IE)]>\n            <table align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"700\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" width=\"700\">\n            <![endif]-->\n            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"max-width: 700px;\" class=\"wrapper\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" style=\"padding: 35px 0;\" class=\"logo\">\n                        <img alt=\"Logo\" src=\"https://www.bb-online.de/wp-content/uploads/2022/03/bb-unternehmensberatung-logo-favion.png\" height=\"50\" width=\"299\" style=\"display: block;\" border=\"0\">\n                    </td>\n                </tr>\n            </table>\n            <!--[if (gte mso 9)|(IE)]>\n            </td>\n            </tr>\n            </table>\n            <![endif]-->\n        </td>\n    </tr>\n    <tr>\n        <td bgcolor=\"#ffffff\" align=\"center\" style=\"padding: 70px 15px 70px 15px;\" class=\"section-padding\">\n            <!--[if (gte mso 9)|(IE)]>\n            <table align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"700\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" width=\"700\">\n            <![endif]-->\n            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"max-width: 700px;\" class=\"responsive-table\">\n              <tr>\n                  <td>\n                      <h1 style=\"font-size:32px; line-height:35px; color:#1d1d1d; font-weight: normal; font-family:Noe, Arial, sans-serif;\">Welcome ${params.firstname}, ${params.lastname} to communication services!</h1>\n                      <p class=\"p\" style=\"font-size: 18px; color: #1d1d1d; line-height: 24px; mso-line-height-rule: exactly\">This is a template example</p>\n\n                  </td>\n              </tr>\n              <tr>\n                  <td class=\"cta-btn\" height=\"35\" valign=\"middle\" align=\"left\">\n                      <br><br>\n                      <!--[if mso]>\n                      <v:rect xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:w=\"urn:schemas-microsoft-com:office:word\" href=\"https://idptest.datapart-factoring.de/\" style=\"height:40px;v-text-anchor:middle;width:150px;\" stroke=\"f\" fillcolor=\"#1d1d1d\">\n                          <w:anchorlock/>\n                          <center>\n                      <![endif]-->\n                      <a href=\"https://idptest.datapart-factoring.de/\" style=\"background-color:#1d1d1d;color:#ffffff;display:inline-block;FONT-SIZE: 18px; TEXT-DECORATION: none; TEXT-TRANSFORM: none; DISPLAY: inline-block; LINE-HEIGHT: 35px; background-color: #1d1d1d;text-align:center;width:150px;-webkit-text-size-adjust:none;\">LOG IN</a>\n                      <!--[if mso]>\n                      </center>\n                      </v:rect>\n                      <![endif]-->\n                  </td>\n              </tr>\n              <tr>\n                  <td style=\"FONT-SIZE: 18px; COLOR: #1d1d1d; LINE-HEIGHT: 24px; mso-line-height-rule: exactly\" valign=\"top\" align=\"left\">\n                      <br><br>\n                      <p>If you have any questions, please contact customer service. </p>\n                      <p>Best wishes, <br />Openleap</p>\n                  </td>\n              </tr>\n          </table>\n            <!--[if (gte mso 9)|(IE)]>\n        </td>\n        </tr>\n        </table>\n            <![endif]-->\n        </td>\n    </tr>\n\n    <tr>\n        <td bgcolor=\"#1d1d1d\" align=\"left\" style=\"padding: 20px 20px;\">\n            <!--[if (gte mso 9)|(IE)]>\n            <table align=\"center\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"700\">\n                <tr>\n                    <td align=\"center\" valign=\"top\" width=\"700\">\n            <![endif]-->\n            <table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\" style=\"max-width: 700px;\" class=\"responsive-table\">\n                <tr>\n                  <td style=\"FONT-SIZE: 13px; FONT-FAMILY: Arial, sans-serif; COLOR: #ffffff\" valign=\"middle\" align=\"left\">&nbsp;</td>\n                </tr>\n            </table>\n            <!--[if (gte mso 9)|(IE)]>\n            </td>\n            </tr>\n            </table>\n            <![endif]-->\n        </td>\n    </tr>\n</table>\n</body>\n</html>"
}
```

### Teams message request using template message type
#### Request

```bash
curl --location 'localhost:8086/gw/mrs/message' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlS25RY3ZTSkxKYTIyOWMydEZZa0RpUjJyLXhLNGoxOUV5RlN6Z3ZuWGlzIn0.eyJleHAiOjE3NTEwMjA1NjEsImlhdCI6MTc1MTAyMDI2MSwianRpIjoiZjdjZGMyYzgtYzFmNi00NjkyLWJmNDUtNDY3ZjQ3ZDUwZjIzIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLXdlYjo4MDkwL3JlYWxtcy9vcGVubGVhcC1yZWFsbSIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiI5YzFhNmRmMy03OTY0LTQyNzAtYjBkZC01YzY4OTFjYmYyNjgiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJtZXNzYWdlLXJlY2VpdmVyLXNlcnZpY2UtY2xpZW50IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1vcGVubGVhcC1yZWFsbSJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoibXJzX3NlbmQgZW1haWwgcmVwb3J0LXNlcnZpY2UgcHJvZmlsZSIsImNsaWVudEhvc3QiOiIxOTIuMTY4LjY1LjEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsInByZWZlcnJlZF91c2VybmFtZSI6InNlcnZpY2UtYWNjb3VudC1tZXNzYWdlLXJlY2VpdmVyLXNlcnZpY2UtY2xpZW50IiwiY2xpZW50QWRkcmVzcyI6IjE5Mi4xNjguNjUuMSIsImNsaWVudF9pZCI6Im1lc3NhZ2UtcmVjZWl2ZXItc2VydmljZS1jbGllbnQifQ.XPPqpJkgOZX0LsaN4pXDtny0HYdGrJvQlCsmTAhVdk1hEr8-dTvbkkp2moUIztcy8njmPb-bXdYm-1Q_6JYHgAPlIc2UQHJmYWk_LZnVMU_ghycVIH-cvsCiBUlD5mFIB39PrRI8U-nBOHp6MEQ763TXCxhOMO5X-Q6dAlZXTNWzR61QyNl8mGYHbbkH_um2A7dQcDStaMeMPoqp2FdIryKrTSvSQYIgtWyNMAw3jmMT3B3Alxs0v0bWIU0grQhkBMSrqUb5ny781qzRaclSWSI9nzcZrLyxDci-E23uAxGQif4CPVvCXhh6FJU1B9JRoFnK6m2vW4l-aEa9bfNLhg' \
--data-raw '{
  "recipients": [
    {
      "id": "kirilarsov@gmail.com",
      "channel": {
        "channelType": "TEAMS",
        "channelId": "1234567890",
        "tenantId": "1234567890"
      }
    }
  ],
  "message": {
    "messageType": "TEMPLATE",
    "name": "Teams message template",
    "templateParams": {
      "param1": "value1",
      "param2": "value2"
    },
    "attachments": [
      {
        "name": "host-A.log",
        "contentType": "text/plain",
        "base64Data": "dGVzdA==",
        "url": "https://example.com/test.txt"
      }
    ]
  }
}'
```
#### Response

200 OK

### Email message request using template message type

#### Request

```bash
curl --location 'localhost:8086/gw/mrs/message' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlS25RY3ZTSkxKYTIyOWMydEZZa0RpUjJyLXhLNGoxOUV5RlN6Z3ZuWGlzIn0.eyJleHAiOjE3NTEwMjA5ODYsImlhdCI6MTc1MTAyMDY4NiwianRpIjoiMDk1OWZhYWItMTc4Ny00OTVlLWI2NTItNDc4Y2EwZGRiZjhlIiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLXdlYjo4MDkwL3JlYWxtcy9vcGVubGVhcC1yZWFsbSIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiI5YzFhNmRmMy03OTY0LTQyNzAtYjBkZC01YzY4OTFjYmYyNjgiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJtZXNzYWdlLXJlY2VpdmVyLXNlcnZpY2UtY2xpZW50IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1vcGVubGVhcC1yZWFsbSJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoibXJzX3NlbmQgZW1haWwgcmVwb3J0LXNlcnZpY2UgcHJvZmlsZSIsImNsaWVudEhvc3QiOiIxOTIuMTY4LjY1LjEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsInByZWZlcnJlZF91c2VybmFtZSI6InNlcnZpY2UtYWNjb3VudC1tZXNzYWdlLXJlY2VpdmVyLXNlcnZpY2UtY2xpZW50IiwiY2xpZW50QWRkcmVzcyI6IjE5Mi4xNjguNjUuMSIsImNsaWVudF9pZCI6Im1lc3NhZ2UtcmVjZWl2ZXItc2VydmljZS1jbGllbnQifQ.ZeO6Kx3vKk208pvKYzZKz0dqDz4RFSZm1B3gvJVgiw6o8-8ZBiho5Z8OxWX1QdkPw1WLY3Lt-fjdmySo7RGVaMQOVOdAZXaHPXwE3vvYWjy9k75y-dmfIw0xnoQEb9X7B6NxPk9_Z1fVtb5gJQBw66lVAktrceNKQV5qGjJm_OzT7tAfB8eNoG4KX9CB0ZSbs9lOzc_EsZ9meAOm3hMmSm5xuaqm3VPT-D4aqQJyKpAUuhNLETxldkzRrPkRYUtpyym3OxelL30okYY_pJ_MY7twxvTlQk01lKTnFIhw1ESBrsat5GiC5bv9Pcxmr9YWpjZETnXI2yQi9EjeGaivCw' \
--data-raw '{
  "recipients": [
    {
      "id": "kirilarsov@gmail.com",
      "channel": {
        "channelType": "EMAIL",
        "bcc": "user@domain.com"
      }
    }
  ],
  "message": {
    "messageType": "TEMPLATE",
    "name": "Email message template",
    "templateParams": {
      "param1": "value1",
      "param2": "value2"
    },
    "attachments": [
      {
        "name": "host-A.log",
        "contentType": "text/plain",
        "base64Data": "dGVzdA==",
        "url": "https://example.com/test.txt"
      }
    ]
  }
}'
```

#### Response
202 Accepted

### Email message request using custom message type

#### Request

```bash
curl --location 'localhost:8086/gw/mrs/message' \
--header 'Content-Type: application/json' \
--header 'Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJlS25RY3ZTSkxKYTIyOWMydEZZa0RpUjJyLXhLNGoxOUV5RlN6Z3ZuWGlzIn0.eyJleHAiOjE3NTEwMjEwODIsImlhdCI6MTc1MTAyMDc4MiwianRpIjoiOWQxN2E5ZDctN2VmZS00ZTFiLThmM2MtMTU2YjQ2ZTM3NjY1IiwiaXNzIjoiaHR0cDovL2tleWNsb2FrLXdlYjo4MDkwL3JlYWxtcy9vcGVubGVhcC1yZWFsbSIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiI5YzFhNmRmMy03OTY0LTQyNzAtYjBkZC01YzY4OTFjYmYyNjgiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJtZXNzYWdlLXJlY2VpdmVyLXNlcnZpY2UtY2xpZW50IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIqIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1vcGVubGVhcC1yZWFsbSJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoibXJzX3NlbmQgZW1haWwgcmVwb3J0LXNlcnZpY2UgcHJvZmlsZSIsImNsaWVudEhvc3QiOiIxOTIuMTY4LjY1LjEiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsInByZWZlcnJlZF91c2VybmFtZSI6InNlcnZpY2UtYWNjb3VudC1tZXNzYWdlLXJlY2VpdmVyLXNlcnZpY2UtY2xpZW50IiwiY2xpZW50QWRkcmVzcyI6IjE5Mi4xNjguNjUuMSIsImNsaWVudF9pZCI6Im1lc3NhZ2UtcmVjZWl2ZXItc2VydmljZS1jbGllbnQifQ.VBEWvOOkhcYr53Y5-FfpfxZ3o4UZbw9-26cmaOwbs7SfM7Ml6mB7XDgeeFXf8GNYF9p3Ip543pS1nA80k3Rna9AEk_S_lJQ5mXFFqKH1fWK7cvyF_u1EWxmlS6U3t51Fnc8N7Qfsl2SdMzGH9wAC-AXvy_bTVQzDpBWCT9HzvEka5_buWKZwuZSgHL9ta3eX5v8VbLDeFT7xQFQe38fhWZljs6l9gc2a4jjxaQxNGWWXXV3TZJ9LtUJ6bcvk5D2Bz9XMptlpZerP00zQpTJ9D6zzqrksrPfRXkv0whvPaLL4nOu7-j0D7-T1Gbs6MGv6NgxBcDEoiuTGn35f19mORg' \
--data-raw '{
  "recipients": [
    {
      "id": "kirilarsov@gmail.com",
      "channel": {
        "channelType": "EMAIL",
        "bcc": "user@domain.com"
      }
    }
  ],
  "message": {
    "messageType": "CUSTOM",
    "name": "Email message template",
    "subject": "Application Error Alert",
    "body": "Take action immediately!",
    "attachments": [
      {
        "name": "host-A.log",
        "contentType": "text/plain",
        "base64Data": "dGVzdA==",
        "url": "https://example.com/test.txt"
      }
    ]
  }
}
'
```

#### Response

202 Accepted